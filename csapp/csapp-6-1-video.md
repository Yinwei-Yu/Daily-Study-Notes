# RAM
SRAM
DRAM
内存
SRAM四到六个晶体管
DRAM1个
S更贵

S更快

DRAM插电用
SRAM更可靠

SRAM容量小,速度快
高速缓存

DRAM主存,图形卡

都是易事的,插电用


# ROM
read only memoory

可编程

现代被称为闪存,可删除上面的存储块
擦除十万次后会损坏

ssd中也有rom

# bus 总线

连接到cpu的线路

系统总线和内存总线连接到io桥,是一组芯片

- 加载操作:

cpu把A的地址放到总线上,主存取出A除的数据传给cpu

写入相似

关键点在于寄存器的读写

# 硬盘

硬盘结构
盘片,磁臂

控制器
- [13:25](https://www.bilibili.com/video/BV1iW411d7hd?p=11&t=805.44983#t=13:25.45) 

细节

- [13:36](https://www.bilibili.com/video/BV1iW411d7hd?p=11&t=816.120973#t=13:36.12) 

磁片,同心圆,扇形区,扇区间有间隙

盘片在主轴上对齐
不同盘片上的轨道也对齐,形成柱面

容量

- [15:38](https://www.bilibili.com/video/BV1iW411d7hd?p=11&t=938.140817#t=15:38.14) 
记录密度- 一个扇区多少
磁道密度
面密度=记录x磁道

越往外间隙越大
浪费空间

解决:
记录区
 
- [17:04](https://www.bilibili.com/video/BV1iW411d7hd?p=11&t=1024.139446#t=17:04.14) 

每条磁道的扇区数不是一个常数,所以用平均数记录

读取数据:
读写头在指定磁道,
磁道旋转
读取数据发送给控制器,给cpu

主要事件事寻道时间(即移动磁道)

现代使用数据块传输给cpu

磁盘控制器控制数据块和扇区之间的映射

# io总线

读取磁盘,
三元组
指令,逻辑块号,内存地址
磁盘将数据传输给主存,传输完毕后通知cpu中断,cpu再从主存中读取数据

因为磁盘读取十分慢

# 固态硬盘

处于主存和机械硬盘之间
在cpu看来完全相同

由闪存组成
闪存翻译层--磁盘控制器

以页为单位读取闪存中的数据
一系列的页组成块

随机写入慢因为需要擦除,需要1ms

# 时钟频率 多核处理器

为了弥补cpu和存储器的速度差距,引入局部性的概念

# 局部性

时间局部性,重复读取一个变量

空间局部性:访问存储器的临近位置


# 存储器存储结构

每一层都从下一层读取数据

缓存

- [58:30](https://www.bilibili.com/video/BV1iW411d7hd?p=11&t=3510.588241#t=58:30.59) 

# 缓存工作

- [01:02:03](https://www.bilibili.com/video/BV1iW411d7hd?p=11&t=3723.260184#t=1:02:03.26) 

传输单元

缓存命中

缓存不命中
cpu需要等待读取数据

- [01:06:41](https://www.bilibili.com/video/BV1iW411d7hd?p=11&t=4001.517926#t=1:06:41.52) 

冷不命中/强制不命中
暖身

冲突不命中
硬件设计较为简单限制了块可以放置的位置
由于某种算法比如mod等导致缓存不命中

容量不命中
工作集

