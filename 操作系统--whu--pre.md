# 操作系统概念

## 绪论

![](附件/第1章%20导论.ppt)
![](附件/第1章%20补.pptx)

硬件 系统 程序 用户
应用程序不可直接接触硬件（cpu和内存之外,为什么?

1. 维持秩序
2. 硬件型号多,应用开发困难

几个问题

1. 怎么限制应用程序访问硬件
2. 硬件型号多样,应用程序不可能穷尽该咋整
3. 键鼠操作经过操作系统最后如何触发

计算机启动过程:
软中断:是一个指令----系统调用

操作系统管理：

1. 处理机
2. 存储器
3. 设备(外围设备
4. 文件

### 历史

人工操作
早期批处理:1.联机批处理2.脱机批处理
监督程序
单道程序系统
多道程序设计技术

### 作业

所做工作的集合
针对于计算任务
作业调度->谁从硬盘进内存
进程调度->谁从内存进cpu

### 分时系统

共享主机
原理:把时间划分为很短的时间片,轮流按时间片把处理机分配给各个联机作业使用

### 三种操作系统类型

批处理
分时
实时:针对特定场合专用系统,在规定时间内完成对特定事件的处理

### 分布式系统

在某个特定任务上,多台计算机协同工作,共同完成任务
每台计算机都有自己的操作系统,经网络连接

### 基本特征

并发
共享
虚拟
不确定:异步性

### 双重操作模式(如何限制app访问硬件)

需要两种操作模式:用户模式和内核模式
在硬件中增加模式位表示当前模式:1用户模式,0内核模式
内核->用户:硬件修改
用户->内核:发生中断就切换为内核模式
内存被划分不同区域,用户程序不能访问内核区域
32位系统:win 用户2G,内核2G linux 用户3G,内核1G

> 编译器保证用户程序不会访问内核区域
> 要是写汇编写程序,就要自己保证

### 资源管理

进程管理
存储管理:内存保护问题,应用不活跃的部分能否从内存中移除?
设备管理:操作系统怎么向下解决多样的硬件?--通用驱动接口(系统和驱动程序交互),特定硬件设备驱动程序(硬件厂商提供)
文件管理

## 操作系统结构

### 用户接口(交互式)

命令行接口:内部命令外部命令
图形用户接口

### 系统调用

程序和系统之间参数传递:

1. 寄存器参数传递
2. 参数存在内存的一张表中,表地址作为寄存器的参数传递
3. 程序把参数压入栈,操作系统弹出

堆栈的详细解释:
用户程序和操作系统各有各的栈,用户程序把参数压入用户栈,系统调用通过软中断

用户态有一套API封装了系统调用,用户程序调用API,API调用系统调用
win32 api
posix api
